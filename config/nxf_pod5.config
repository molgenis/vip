includeConfig 'nxf.config'
includeConfig 'nxf_cram.config'

// Environmental commands
env {
	CMD_DORADO = "apptainer exec --nv --no-mount home --bind \${TMPDIR} ${APPTAINER_CACHEDIR}/dorado-shac28cd94f2303b0493a4b16ca86e711852c2b8525.sif dorado"
  CMD_MODKIT = "apptainer exec --no-mount home --bind \${TMPDIR} ${APPTAINER_CACHEDIR}/modkit-sha3745cd8f97213eaf908f5fbf4f2f8b8e2cedfc30.sif modkit"
}

// Process how to execute
process {
	withLabel: 'dorado'{
		executor = 'slurm'
		memory = '40GB'
		time = '10h'
		cpus = 20
		clusterOptions = '--gres=gpu:a40:1 --qos=priority'
	}

	withLabel: 'sort_bam'{
		executor = 'slurm'
		memory = '10GB'
		time = '10h'
		cpus = 10
	}

	withLabel: 'modkit'{
		executor = 'slurm'
		memory = '30GB'
		time = '10h'
		cpus = 5
	}
}

// Parameters used in workflow mod
params {
	dorado_model = "/groups/umcg-gcc/tmp02/users/umcg-jkloosterman/dorado_models/dna_r10.4.1_e8.2_400bps_hac@v4.2.0/"
}

