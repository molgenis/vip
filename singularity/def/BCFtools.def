Bootstrap: localimage
From: sif/build/alpine-scratch.sif

%post
    apk update

    apk add curl zlib libbz2 xz
    
    # download
    mkdir /downloads

    curl -Ls -o /downloads/bcftools-1.13.tar.bz2 https://github.com/samtools/bcftools/releases/download/1.13/bcftools-1.13.tar.bz2
    echo "13bfa1da2a5edda8fa51196a47a0b4afb3fef17516451e4f0e78477f3dd30b90  /downloads/bcftools-1.13.tar.bz2" | sha256sum -c

    # install
    apk add --virtual=.build-dependencies build-base zlib-dev bzip2-dev xz-dev curl-dev
    tar xf /downloads/bcftools-1.13.tar.bz2 -C /downloads
    cd /downloads/bcftools-1.13
    make install

    # cleanup
    apk del .build-dependencies
    rm -rf /var/cache/apk/* /downloads
%help
    BCFtools - utilities for variant calling and manipulating VCFs and BCFs.
    
