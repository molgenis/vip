Bootstrap: localimage
From: sif/build/ubuntu-22.04.sif

%post
    apt-get update
    apt-get install -qq curl bzip2 gcc make zlib1g-dev libbz2-dev liblzma-dev libdeflate-dev git python3-setuptools python3-pip

    apt install ncbi-blast+  --assume-yes

    mkdir -p /opt/trf/
    curl -Ls -o /opt/trf/trf "https://github.com/Benson-Genomics-Lab/TRF/releases/download/v4.09.1/trf409.linux64"
    chmod +x /opt/trf/trf

    #b894775d2917c4c36b29c256e7db977a12f56e57 == v1.4.4_vip_v1
    pip install git+https://github.com/molgenis/straglr.git@b894775d2917c4c36b29c256e7db977a12f56e57#egg=straglr

    # cleanup
    pip cache purge
    apt-get clean

%environment
   PATH=$PATH:/opt/trf

%help
    Long-read-based human genomic short tandem repeat detection.
