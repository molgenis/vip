Bootstrap: scratch

%help
    Singularity container running Alpine Linux    
 
%setup
    alpine_version_major=3
    alpine_version_minor=14
    alpine_version_patch=2
    
    alpine_minirootfs="alpine-minirootfs-${alpine_version_major}.${alpine_version_minor}.${alpine_version_patch}-x86_64.tar.gz"
    alpine_minirootfs_url="http://dl-cdn.alpinelinux.org/alpine/v${alpine_version_major}.${alpine_version_minor}/releases/x86_64/${alpine_minirootfs}"
    alpine_minirootfs_path="${SINGULARITY_TMPDIR}/${alpine_minirootfs}"

    curl -s -o "${alpine_minirootfs_path}" "${alpine_minirootfs_url}"
    echo "4591f811a5515b13d60ab76f78bb8fd1cb9d9857a98cf7e2e5b200e89701e62c  ${alpine_minirootfs_path}" | sha256sum -c
    tar xzf "${alpine_minirootfs_path}" -C "${SINGULARITY_ROOTFS}" --exclude=./dev --exclude=./etc/hosts

